!function(t){t.fn.bilgieticaret_RelatedOptions=function(e){$this=this;var n={each:function(t,e){for(var n in t)if(t.hasOwnProperty(n)&&!1===e(t[n],n))return},getSetting:function(t,e){return void 0===n.vr_settings[t]?e:"0"!==n.vr_settings[t]?n.vr_settings[t]:0},bind:function(t,e){n.parentBlock.on(t,e)},trigger:function(t,e){n.getBlockOfOptions().trigger(t,e)},initRO:function(e){if(n.vr_data&&n.vr_data!={}&&n.vr_data!=[]){if(n.getOptionElement("[data-quantity-per-option][data-product-option-id]").each(function(){var e=t(this).attr("data-product-option-id");-1!=t.inArray(e,n.vr_product_options)&&n.input_quantity_per_options.push(e)}),n.options_step_by_step=n.getOptionsAsSteps(),!n.options_step_by_step.length&&!e){t(document).ready(function(){n.initRO(1)});return}for(var i=0;i<n.options_step_by_step.length;i++)n.all_values_of_options[n.options_step_by_step[i]]=n.getAllValuesOfProductOption(n.options_step_by_step[i]);n.getOptionElement('select[name^="'+n.option_prefix+'"]').change(function(){n.controlAccessToValuesOfAllOptions()}),n.getOptionElement('input[type=radio][name^="'+n.option_prefix+'"]').change(function(){n.controlAccessToValuesOfAllOptions()}),n.controlAccessToValuesOfAllOptions(),t(document).ready(function(){if(void 0!==n.ros_to_select&&n.ros_to_select&&n.ros_to_select.length){var t=!1;n.each(n.ros_to_select,function(e){t=e,n.setSelectedCombination(t,!0)}),t&&n.setSelectedCombination(t)}else!n.setSelectedCombinationByModel(n.filter_name)&&n.poip_ov&&setTimeout(function(){n.makeFirstValuesSelected()},1),n.controlAccessToValuesOfAllOptions(),n.initialAutoSelect()}),n.trigger("init_after.ro")}},makeFirstValuesSelected:function(e){var i=n.getOptionValues([]),o=[],a=!1;n.each(i,function(t,e){t&&(a=!0,o.push(e))}),(a||e)&&n.each(n.options_step_by_step,function(i){if(-1!=t.inArray(i,n.vr_product_options)){var a=!1;n.getOptionElement('select[name="'+n.option_prefix+"["+i+']"]').length?a=n.getOptionElement('select[name="'+n.option_prefix+"["+i+']"] option[value][value!=""]:not(:disabled)').val():n.getOptionElement('input[type=radio][name="'+n.option_prefix+"["+i+']"]').length>0&&(a=n.getOptionElement('input[type=radio][name="'+n.option_prefix+"["+i+']"]:not(:disabled):first').val()),a&&(-1==t.inArray(i,o)||e)&&(n.setOptionValue(i,a),n.controlAccessToValuesOfAllOptions())}})},setOptionValue:function(t,e){var i="";if(n.getOptionElement('select[name="'+n.option_prefix+"["+t+']"]').length>0)i=n.getOptionElement('[name="'+n.option_prefix+"["+t+']"]').val(e);else if(n.getOptionElement('input[type=radio][name="'+n.option_prefix+"["+t+']"]').length>0){var o=n.getOptionElement('input[type=radio][name="'+n.option_prefix+"["+t+']"]');o.prop("checked",!1),e&&n.getOptionElement('input[type=radio][name="'+n.option_prefix+"["+t+']"][value='+e+"]").prop("checked",!0),i=o}n.trigger("setOptionValue_after.ro",[t,e,i]),"function"==typeof poipExternalOptionChange&&poipExternalOptionChange(),"undefined"!=typeof poip_product&&"function"==typeof poip_product.externalOptionChange&&poip_product.externalOptionChange()},getBlockOfOptions:function(){return n.parentBlock},getOptionElement:function(t){return n.getBlockOfOptions().find(t)},getProductOptionIdFromName:function(t){return t.substr(n.option_prefix_length+1,t.lastIndexOf("]")-(n.option_prefix_length+1))},getElement:function(t){return n.parentBlock.find(t)},getQuantityInput:function(){let t=n.custom_getQuantityInput();return t||(t=n.getElement("input[type=text][name=quantity], input[type=number][name=quantity]")),t},getQuantity:function(){return n.getQuantityInput().val()},getValuesOfSelectOption:function(e){return t.isEmptyObject(n.all_select_ov)&&n.getOptionElement('select[name^="'+n.option_prefix+'["]').each(function(e,i){var o=n.getProductOptionIdFromName(i.name);n.all_select_ov[o]=[],t.each(i.options,function(t,e){n.all_select_ov[o].push(e.value)})}),n.all_select_ov[e]},getCurrentROIds:function(t){var e=[];return n.each(n.vr_data,function(i){var o;n.each(i.ro,function(i,a){o=!0,n.each(i.options,function(e,n){n in t&&t[n]==e||(o=!1)}),o&&e.push(a)})}),e},arrayIntersection:function(e,i){var o=[];return n.each(e,function(e){-1!=t.inArray(e,i)&&o.push(e)}),o},arrayCopy:function(e){var i=[];return n.each(e,function(e,o){t.isArray(e)?i[o]=n.arrayCopy(e):i[o]=e}),i},getAllValuesOfProductOption:function(e){var i=[];if(n.getOptionElement('select[name="'+n.option_prefix+"["+e+']"]').length)for(var o=n.getValuesOfSelectOption(e),a=0;a<o.length;a++)o[a]&&i.push(o[a]);else n.getOptionElement('input[type=radio][name="'+n.option_prefix+"["+e+']"]').length&&n.getOptionElement('input[type=radio][name="'+n.option_prefix+"["+e+']"]').each(function(){i.push(t(this).val())});return -1!=t.inArray(e,n.input_quantity_per_options)&&t('[name^="quantity_per_option['+e+']["]').each(function(){var e=t(this).attr("data-value");e&&i.push(e)}),i},getOptionsWithDirectRelations:function(e){if(n.linked_options_cache[e])return n.linked_options_cache[e];var i=[];return n.each(n.vr_data,function(o){-1!=t.inArray(e,o.options_ids)&&n.each(o.options_ids,function(n){n!=e&&t.inArray(n,i)&&i.push(n)})}),n.linked_options_cache[e]=i,i},getAccessibleOptionValues:function(e,i,o){var a=n.arrayCopy(i),r=n.arrayCopy(o);r.push(e);var p=n.getOptionsWithDirectRelations(e);n.each(p,function(i){a[i]&&!a[i].length&&i!=e&&-1==t.inArray(i,r)&&(a[i]=n.getAccessibleOptionValues(i,a,r))});var s=!1,l=n.all_values_of_options[e];return n.each(n.vr_data,function(i){if(-1!=t.inArray(e,i.options_ids)){var o=[],p=i.ro,c=[];n.each(a,function(n,o){o!=e&&a[o].length&&-1==t.inArray(o,r)&&-1!=t.inArray(o,i.options_ids)&&c.push(o)}),c.length?n.each(p,function(n){all_ok=!0;for(var i=0;i<c.length;i++){var r=c[i];if(-1==t.inArray(n.options[r],a[r])&&(all_ok=!1),!all_ok)break}if(all_ok&&-1==t.inArray(n.options[e],o)&&(o.push(n.options[e]),l.length==o.length))return!1}):1==i.options_ids.length?n.each(p,function(n){n.options[e]&&-1==t.inArray(n.options[e],o)&&o.push(n.options[e])}):o=n.arrayCopy(l),s=!1===s?o:n.arrayIntersection(s,o)}}),s},controlAccessToValuesOfOption:function(t,e){var i=[];n.each(t,function(e,n){i[n]=[],t[n]&&i[n].push(t[n])});var o=n.getAccessibleOptionValues(e,i,[]);return n.setAccessibleOptionValues(e,o),o},toggleOptionElement:function(t,e){n.getOptionElement("#input-option"+t).parent().toggle(e),n.getOptionElement("#input-option"+t).parent().is("div.select")&&n.getOptionElement("#input-option"+t).parent().parent().is("div.form-group")&&n.getOptionElement("#input-option"+t).parent().parent().toggle(e),n.getOptionElement('label[for="input-option'+t+'"]').toggle(e),n.getOptionElement("#input-option"+t).parent().is(".fancy-select")&&n.getOptionElement("#input-option"+t).parent().parent().toggle(e),n.trigger("toggleOptionElement_after.ro",[t,e])},optionIsAccessible:function(t){return n.getOptionElement('select[name="'+n.option_prefix+"["+t+']"]').length?!!n.getOptionElement('select[name="'+n.option_prefix+"["+t+']"] option[value][value!=""]:not(:disabled)').length:n.getOptionElement('input[type=radio][name="'+n.option_prefix+"["+t+']"]').length?!!n.getOptionElement('input[type=radio][name="'+n.option_prefix+"["+t+']"]:not(:disabled)').length:n.getOptionElement('input[name^="quantity_per_option['+t+']["]').length?!!n.getOptionElement('input[name^="quantity_per_option['+t+']["]:not(:disabled)').length:void 0},hideInaccessibleOptionIfNeeded:function(t){n.vr_settings&&n.vr_settings.hide_option&&n.toggleOptionElement(t,n.optionIsAccessible(t))},makeInaccessibleOptionsNotRequired:function(e){if(n.vr_settings&&n.vr_settings.unavailable_not_required){var i=[];t("#vr_not_required").length?i=t("#vr_not_required").val().split(","):t("#product").append('<input type="hidden" name="vr_not_required" id="vr_not_required" value="">');var o=[];n.each(i,function(t){t!=e&&o.push(t)}),n.optionIsAccessible(e)||o.push(e),t("#vr_not_required").val(o.toString())}},setAccessibleOptionValues:function(e,i){var o=n.getOptionElement('input[type=radio][name="'+n.option_prefix+"["+e+']"]:checked').val()||n.getOptionElement('select[name="'+n.option_prefix+"["+e+']"]').val();if(n.getOptionElement('select[name="'+n.option_prefix+"["+e+']"]').length){if(o&&-1==t.inArray(o,i)&&n.getOptionElement('select[name="'+n.option_prefix+"["+e+']"]').val(""),n.hide_inaccessible){let a=n.getValuesOfSelectOption(e);for(let r=0;r<a.length;r++)a[r]&&(option_value_disabled=-1==t.inArray(a[r],i),n.getOptionElement('select[name="'+n.option_prefix+"["+e+']"]').toggleOption(a[r],!option_value_disabled))}else{let p=n.getOptionElement('select[name="'+n.option_prefix+"["+e+']"]')[0].options;for(let s=0;s<p.length;s++)p[s].value&&(option_value_disabled=-1==t.inArray(p[s].value,i),p[s].disabled=option_value_disabled,option_value_disabled?t(p[s]).addClass("vr_option_disabled"):t(p[s]).removeClass("vr_option_disabled"))}n.trigger("setAccessibleOptionValues_select_after.ro",[e,i])}else if(n.getOptionElement('input[type=radio][name="'+n.option_prefix+"["+e+']"]').length){if(o&&-1==t.inArray(o,i)){var l=n.getOptionElement('input[type=radio][name="'+n.option_prefix+"["+e+']"]:checked');l.length&&l.prop("checked",!1),n.trigger("setAccessibleOptionValues_radioUncheck_after.ro",[l])}radio_options=n.getOptionElement('input[type=radio][name="'+n.option_prefix+"["+e+']"]');for(var c=0;c<radio_options.length;c++)option_value_disabled=-1==t.inArray(radio_options[c].value,i),t(radio_options[c]).prop("disabled",option_value_disabled),n.hide_inaccessible?(void 0!==n.custom_radioToggle&&n.custom_radioToggle(t(radio_options[c]),option_value_disabled)||(t(radio_options[c]).parent().parent().toggle(!option_value_disabled),t(radio_options[c]).toggle(!option_value_disabled)),void 0!==n.custom_radioChangeClass&&n.custom_radioChangeClass()&&(option_value_disabled?t(radio_options[c]).parent().parent().hasClass("radio")&&(t(radio_options[c]).parent().parent().removeClass("radio"),t(radio_options[c]).parent().parent().addClass("_radio_ro")):t(radio_options[c]).parent().parent().hasClass("_radio_ro")&&(t(radio_options[c]).parent().parent().removeClass("_radio_ro"),t(radio_options[c]).parent().parent().addClass("radio"))),n.trigger("setAccessibleOptionValues_radioToggle_after.ro",[e,t(radio_options[c])])):(void 0!==n.custom_radioEnableDisable&&n.custom_radioEnableDisable(t(radio_options[c]),option_value_disabled)||(option_value_disabled?t(radio_options[c]).parent().fadeTo("fast",.1):t(radio_options[c]).parent().fadeTo("fast",1)),n.trigger("setAccessibleOptionValues_radioEnableDisable_after.ro",[e,t(radio_options[c])]))}else -1!=t.inArray(e,n.input_quantity_per_options)&&n.getOptionElement('[name^="quantity_per_option['+e+']["]').each(function(){var e=t(this),o=qpo_getPOVIdByName(e.attr("name"));if(o){(option_value_disabled=-1==t.inArray(o,i))?e.val(""):e.prop("disabled")&&e.val(e.attr("data-default-value")),e.prop("disabled",option_value_disabled);var a=e.closest("tr");a.length||(a=e.closest("div")),n.hide_inaccessible?a.toggle(!option_value_disabled):option_value_disabled?a.fadeTo("fast",.1):a.fadeTo("fast",1)}});n.hideInaccessibleOptionIfNeeded(e),n.makeInaccessibleOptionsNotRequired(e)},getOptionValues:function(){var e={};return n.getOptionElement('select[name^="'+n.option_prefix+'["], input[type=radio][name^="'+n.option_prefix+'["]').each(function(){option_id=n.getProductOptionIdFromName(t(this).attr("name")),-1!=t.inArray(option_id,n.vr_product_options)&&(void 0===e[option_id]&&(e[option_id]=0),t(this).find("option[value]").length?e[option_id]=t(this).val():t(this).is(":checked")&&(e[option_id]=t(this).val()))}),n.each(n.input_quantity_per_options,function(t){e[t]=0}),e},getSelectedOptionValues:function(){let t={};return n.each(n.getOptionValues(),function(e,n){e&&(t[n]=e)}),t},hasSelectedOptions:function(){return Object.keys(n.getSelectedOptionValues()).length},setSelectedCombination:function(t,e){var i=[];n.vr_data&&n.each(n.vr_data,function(e){let o=e.ro;if(o[t])return n.each(o[t].options,function(e,a){n.setOptionValue(a,o[t].options[a]),i.push(o[t].options[a])}),!1}),(void 0===e||!e||n.step_by_step&&n.hide_inaccessible)&&(n.controlAccessToValuesOfAllOptions(),n.trigger("setSelectedCombination_withAccessControl_after.ro")),n.executeFunctionsFromOtherExtensionsOnOptionChange()},executeFunctionsFromOtherExtensionsOnOptionChange:function(){if("function"==typeof pcop_check_visibility&&pcop_check_visibility(),"function"==typeof poipExternalOptionChange&&poipExternalOptionChange(),"undefined"!=typeof poip_product&&"function"==typeof poip_product.externalOptionChange&&poip_product.externalOptionChange(),"function"==typeof liveprice_recalc&&liveprice_recalc(100),window.bilgieticaret&&window.bilgieticaret.live_price_instances){var t=window.bilgieticaret.live_price_instances;Array.isArray(t)&&t.length&&n.each(t,function(t){t.updatePrice(100)})}},setSelectedCombinationByModel:function(t){return t&&n.vr_data&&n.each(n.vr_data,function(e){n.each(e.ro,function(e){if(e.model&&e.model.toLowerCase()==t.toLowerCase())return n.setSelectedCombination(vr_id),!0})}),!1},getOptionsAsSteps:function(){var e=[];return n.getOptionElement('input[name^="'+n.option_prefix+'["], select[name^="'+n.option_prefix+'["]').each(function(){let i=n.getProductOptionIdFromName(n.getOptionElement(this).attr("name"));-1!=t.inArray(i,n.vr_product_options)&&-1==t.inArray(i,e)&&e.push(i)}),n.each(n.input_quantity_per_options,function(t){e.push(t)}),e},controlAccessToValuesOfAllOptions:function(){if(n.vr_data&&Object.keys(n.vr_data).length){if(n.step_by_step){var t={},e=[],i=[],o=!1;for(let a=0;a<n.options_step_by_step.length;a++)0==a?n.controlAccessToValuesOfOption([],n.options_step_by_step[a]):o?(n.setAccessibleOptionValues(n.options_step_by_step[a],[]),i=[]):i=n.controlAccessToValuesOfOption(t,n.options_step_by_step[a]),e.push(n.getOptionElement('input[type=radio][name="'+n.option_prefix+"["+n.options_step_by_step[a]+']"]:checked').val()||n.getOptionElement('select[name="'+n.option_prefix+"["+n.options_step_by_step[a]+']"]').val()),t[n.options_step_by_step[a]]=e[e.length-1],(i.length||0==a)&&!e[a]&&(o=!0)}else{var r=n.getOptionValues(),p=Object.keys(r);for(let s=0;s<p.length;s++)n.controlAccessToValuesOfOption(r,p[s])}n.checkAutoSelect(),n.trigger("controlAccessToValuesOfAllOptions_after.ro")}},checkAutoSelect:function(){(n.auto_select_last||n.auto_select_first_always)&&n.each(n.options_step_by_ste,function(e){if(n.getOptionElement('select[name="'+n.option_prefix+"["+e+']"]').length){let i=n.getOptionElement('select[name="'+n.option_prefix+"["+e+']"]').find('option[value][value!=""]:not(:disabled)');if(n.auto_select_last&&1==i.length&&!t(i[0]).is(":selected")||n.auto_select_first_always&&i.length&&!i.filter(":selected").length){let o=t(i[0]).val();n.setOptionValue(e,o),t(i[0]).parent().change();return}}else if(n.getOptionElement('input:radio[name="'+n.option_prefix+"["+e+']"]').length){let a=n.getOptionElement('input:radio[name="'+n.option_prefix+"["+e+']"]:not(:disabled)');if(n.auto_select_last&&1==a.length&&!t(a[0]).is(":checked")||n.auto_select_first_always&&a.length&&!a.filter(":checked").length){let r=t(a[0]).val();n.setOptionValue(e,r),t(a[0]).change();return}}})},initialAutoSelect:function(){n.vr_settings&&n.vr_settings.select_first&&1==n.vr_settings.select_first&&n.each(n.options_step_by_step,function(t){if(n.getOptionElement('select[name="'+n.option_prefix+"["+t+']"]').length){let e=n.getOptionElement('select[name="'+n.option_prefix+"["+t+']"]');if(!e.val()){let i=e.find('option[value][value!=""]:not(:disabled)');i.length&&(n.setOptionValue(t,i.val()),e.change())}}else if(n.getOptionElement('input:radio[name="'+n.option_prefix+"["+t+']"]').length&&!n.getOptionElement('input:radio[name="'+n.option_prefix+"["+t+']"]:checked').length){let o=n.getOptionElement('input:radio[name="'+n.option_prefix+"["+t+']"]:not(:disabled):first');o.length&&(n.setOptionValue(t,o.attr("value")),o.change())}})}};n.parentBlock=this;var i=t.extend({vr_settings:{},vr_data:!1,vr_theme_name:"",ros_to_select:"",poip_ov:"",filter_name:"",option_prefix:"option"},e);return n.vr_settings=i.vr_settings,n.vr_theme_name=i.vr_theme_name,n.vr_data=i.vr_data,n.ros_to_select=i.ros_to_select,n.poip_ov=i.poip_ov,n.filter_name=i.filter_name,n.hide_inaccessible=n.getSetting("hide_inaccessible"),n.step_by_step=n.getSetting("step_by_step"),n.auto_select_last=2==n.getSetting("select_first"),n.auto_select_first_always=3==n.getSetting("select_first"),n.option_prefix=i.option_prefix,n.vr_data.length&&!t('[name^="option["]').length&&t('[name^="option_oc["]').length&&(n.option_prefix="option_oc"),n.option_prefix_length=n.option_prefix.length,n.vr_product_options=[],n.vr_data&&n.each(n.vr_data,function(e){n.each(e.options_ids,function(e){-1==t.inArray(e,n.vr_product_options)&&n.vr_product_options.push(e)})}),n.linked_options_cache={},n.all_select_ov={},n.input_quantity_per_options=[],n.vr_stock_control_last_call="",n.options_types=[],n.options_step_by_step=[],n.all_values_of_options=[],this.data("bilgieticaret_relatedOptions",n),window.bilgieticaret||(window.bilgieticaret={}),window.bilgieticaret.varyantlar_instances||(window.bilgieticaret.varyantlar_instances=[]),window.bilgieticaret.varyantlar_instances.push(n),n}}(jQuery);